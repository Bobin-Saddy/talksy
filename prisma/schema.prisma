// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// Note that some adapters may set a maximum length for the String type by default, please ensure your strings are long
// enough when changing adapters.
// See https://www.prisma.io/docs/orm/reference/prisma-schema-reference#string for more information
datasource db {
  provider = "sqlite"
  url      = "file:dev.sqlite"
}

model Session {
  id            String    @id
  shop          String
  state         String
  isOnline      Boolean   @default(false)
  scope         String?
  expires       DateTime?
  accessToken   String
  userId        BigInt?
  firstName     String?
  lastName      String?
  email         String?
  accountOwner  Boolean   @default(false)
  locale        String?
  collaborator  Boolean?  @default(false)
  emailVerified Boolean?  @default(false)
  refreshToken        String?
  refreshTokenExpires DateTime?
}


model ChatSession {
  id        String        @id @default(cuid())
  shop      String
  sessionId String        @unique
  firstName String?
  lastName  String?
  email     String?
  messages  ChatMessage[]
  createdAt DateTime      @default(now())
}

model ChatMessage {
  id            Int         @id @default(autoincrement())
  chatSessionId String
  session       ChatSession @relation(fields: [chatSessionId], references: [sessionId])
  message       String
  sender        String      // "user" or "admin"
  fileUrl       String?     // URL to the uploaded file
  fileType      String?     // e.g., "image/png", "application/pdf"
  createdAt     DateTime    @default(now())
}

model ChatSettings {
  id                    String   @id @default(uuid())
  shop                  String   @unique
  primaryColor          String   @default("#4F46E5")
  headerBgColor         String   @default("#384959")
  heroBgColor           String   @default("#bdddfc")
  headerTextColor       String   @default("#bdddfc")
  heroTextColor         String   @default("#384959")
  cardTitleColor        String   @default("#384959")
  cardSubtitleColor     String   @default("#64748b")
  onboardingTextColor   String   @default("#384959")
  
  // NAYE FIELDS YAHAN ADD KAREIN
  chatBoxBgColor        String   @default("#F8FAFC")
  messageBgColor        String   @default("#FFFFFF")
  widgetBorderColor     String   @default("#E5E7EB")
  
  customLauncherImg     String?
  welcomeImg            String   @default("https://ui-avatars.com/api/?name=Support&background=fff&color=4F46E5")
  headerTitle           String   @default("Live Support")
  headerSubtitle        String   @default("Online now")
  welcomeText           String   @default("Hi there ðŸ‘‹")
  welcomeSubtext        String   @default("We are here to help you! Ask us anything.")
  replyTimeText         String   @default("Typically replies in 5 minutes")
  startConversationText String   @default("Send us a message") 
  onboardingTitle       String   @default("Start a conversation")
  onboardingSubtitle    String   @default("Please provide your details to begin.")
  launcherIcon          String   @default("custom")
  fontFamily            String   @default("-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif")
  baseFontSize          String   @default("15px")
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
}